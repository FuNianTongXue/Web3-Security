# 研发安全平台 Arco 化改造方案（四角色协同）

## 参考来源
- Arco React 快速开始：https://arco.design/react/docs/start
- Arco React 组件库（官方仓库）：https://github.com/arco-design/arco-design/tree/main/components
- npm 包（@arco-design/web-react）：https://www.npmjs.com/package/@arco-design/web-react

## 目标
- 去除“脚手架式编号页面”，重构为产品级信息架构。
- 引入统一设计语言（Arco 风格）：布局、表单、状态反馈、主题变量。
- 把“动态审计编排”升级为可拖动工作流能力，并和后端执行链路闭环。

## 角色分工（并行）
- 产品经理：
  - 拆分模块 IA：扫描、编排、治理、报告、设置。
  - 定义 MVP：拖动编排、门禁策略、运行历史、失败回退。
  - 输出验收标准与可观测指标（成功率、阻断率、回退率）。
- 前端工程师：
  - 先在现有 Go 模板中做 Arco 风格过渡（布局/组件语义化）。
  - 第二阶段引入 React + Arco（独立前端工程），接现有 API。
  - 完成 DnD 编排画布、状态流转与错误提示一致性。
- 后端工程师：
  - 维持 API 向前兼容，新增编排字段（如 `task_order`）。
  - 完善 n8n 执行链路（鉴权、重试、回退、连通性测试）。
  - 提供编排执行事件与审计日志。
- UI 设计师：
  - 定义视觉系统（颜色、间距、字号、状态色、组件规范）。
  - 输出编排画布高保真交互（拖动、吸附、禁用态、异常态）。
  - 统一暗色主题下对比度与层级。

## 当前已落地
- 动态审计支持拖动排序，排序结果透传后端 `task_order`。
- 后端按 `task_order` 重排执行计划（local/n8n 都生效）。
- 页面标题去“1/2/3 编号”表达，改为模块化命名。

## 下一阶段（48h）
- 前端：
  - 将扫描页重构为 3 栏：配置、编排、运行结果。
  - 把门禁阈值与运行历史做成卡片化区块。
- 后端：
  - 新增编排模板 API（快速/标准/深度/自定义）。
  - 新增执行事件流 API（用于前端实时状态）。
- 设计：
  - 输出 Arco 组件映射清单（Form/Card/Tabs/Drawer/Message）。
  - 输出 DnD 编排视觉规范与交互动效规范。

## 验收标准
- 用户可在 3 分钟内完成一次“配置 -> 编排 -> 执行 -> 查看门禁结果”。
- 编排拖动顺序与实际执行顺序一致，日志可追溯。
- n8n 失败时 `auto` 模式可稳定回退，且前端提示明确。
